@model OrderVM 
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
    <!-- Main content -->
    <section class="content mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-3">
                    <!-- Profile Image -->
                    <div class="card card-primary card-outline">
                        <div class="card-body box-profile">
                            <div class="text-center">
                                <img class="profile-user-img img-fluid rounded-circle"
                                     src="/assets/img/profile.png"
                                     alt="User profile picture" height="100" width="100">
                            </div>
                            <h3 class="profile-username text-center">Rakib Hosen</h3>
                            <p class="text-muted text-center">Customer</p>
                            <ul class="list-group list-group-unbordered mb-3 nav-pills">
                                <li class="list-group-item"><a class=" active" href="#user-profile" data-toggle="tab"><i class="fa fa-user"></i> Profile</a></li>
                                <li class="list-group-item"><a class="" href="#order-list" data-toggle="tab"><i class="fa fa-shopping-cart"></i> Orders</a></li>
                                <li class="list-group-item"><a class="" href="#coupon" data-toggle="tab"><i class="fa fa-gift"></i> Coupon</a></li>
                                <li class="list-group-item"><a class="" href="#settings" data-toggle="tab"><i class="fa fa-cog"></i> Settings</a></li>
                                <li class="list-group-item"><a href="" data-toggle="modal" data-target="#confirmLogout"><i class="fa fa-sign-out"></i> Logout</a></li>


                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-9">
                    <div class="card">
                        <div class="card-body">
                            <div class="tab-content">
                                <div class="active tab-pane ck-cart-info" id="user-profile">
                                    <h5 class="mb-3">Customer Profile</h5>
                                    <div class="card p-2 shadow-lg">
                                        <div class="card-body">
                                            <div class="form-style">
                                                <form action="/action_page.php">
                                                    <div class="row">
                                                        <div class="col-lg-6">
                                                            <div class="form-group ck-form-style">
                                                                <label for="email">Your Name*</label>
                                                                <input type="text" class="rounded-0 form-control" placeholder="Enter email" id="email">
                                                            </div>
                                                            <div class="form-group ck-form-style">
                                                                <label for="pwd">City *</label>
                                                                <select name="" id="" class="form-control">
                                                                    <option value="">Chose Shipping</option>
                                                                    <option value="">Dhaka</option>
                                                                    <option value="">Barishal</option>
                                                                    <option value="">Patuakhali</option>
                                                                </select>
                                                            </div>
                                                            <div class="form-group ck-form-style">
                                                                <label for="email">Phone *</label>
                                                                <input type="number" class="rounded-0 form-control" placeholder="Enter email" id="email">
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-6">
                                                            <div class="form-group ck-form-style">
                                                                <label for="email">Email Address *</label>
                                                                <input type="email" class="rounded-0 form-control" placeholder="Enter email" id="email">
                                                            </div>
                                                            <div class="form-group ck-form-style">
                                                                <label for="pwd">Address</label>
                                                                <textarea class="rounded-0 form-control"></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="w-25 mx-auto">
                                                        <input type="submit" value="Save" class="btn btn-dark btn-block  text-white">
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane ck-cart-info" id="order-list">
                                    <h5 class="mb-3">YOUR PLACED ORDERS</h5>
                                    @if (Model.Orders.Count > 0)
                                    {
                                        @foreach (var o in Model.Orders)
                                        {


                                            <div class="card shadow-lg mt-2">
                                                <div class="card-body">

                                                    <div class="row d-flex align-items-center">


                                                        <div class="col-lg-4 col-6">
                                                            <p>Order ID : <strong>#0000 @o.OrderId</strong></p>

                                                            <p>Total Amount : <strong>TK $@String.Format("{0:0.00}", Model.Total)  </strong></p>
                                                            <p>
                                                                <small> @o.OrderDate</small>
                                                            </p>
                                                        </div>

                                                        <div class="col-lg-4 col-4">
                                                            <p class="text-center">

                                                                    <span class="badge badge-success">Paid</span>
                                                       
                                                                    <span class="badge badge-danger">Unpaid</span>
                                                                


                                                            </p>
                                                            <p class="text-center"><small>Expected delivery by: To be Determined</small></p>
                                                        </div>
                                                        <div class="col-lg-4 col-2">
                                                            <a asp-action="OrderDetails" asp-controller="Order" class="btn btn-info btn-sm  rounded-0 text-white float-right d-lg-none d-md-none d-xl-none"><i class="fa fa-eye"></i></a>

                                                            <a class="btn btn-info btn-sm  rounded-0 text-white float-right d-none d-sm-block" data-toggle="modal" data-target="#productView-@o.OrderId"><i class="fa fa-eye"></i>View</a>
                                                        </div>


                                                        <div class="modal fade modal-center" id="productView-@o.OrderId">
                                                            <div class="modal-dialog modal-lg">
                                                                <div class="modal-content">
                                                                    <!-- Modal Header -->
                                                                    <div class="modal-header border-0 ck-cart-info">
                                                                        <h5>Product Description</h5>
                                                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                                    </div>
                                                                    <!-- Modal body -->
                                                                    <div class="modal-body">
                                                                        <div class="row">
                                                                            <div class="col-lg-12">
                                                                                <div class="card">
                                                                                    <div class="card-body p-0 table-responsive">
                                                                                        <table class="table table-bordered">
                                                                                            <thead>
                                                                                                <tr>

                                                                                                    <th scope="col">Product Name</th>
                                                                                                    <th scope="col">Price</th>
                                                                                                    
                                                                                                    <th scope="col" width="14%">Qty</th>
                                                                                                    <th scope="col">Sub Total</th>
                                                                                                    <th></th>

                                                                                                </tr>
                                                                                            </thead>
                                                                                            <tbody>
                                                                                                @{
                                                                                                    decimal total = 0;
                                                                                                }
                                                                                                @foreach (var c in o.OrderDetails)
                                                                                                {

                                                                                                <tr>
                                                                                                    <td>@c.Product.ProductName</td>

                                                                                                    <td>    $@String.Format("{0:0.00}", c.ProductPrice)</td>
                                                                                                    <td>@c.Quantity</td>
                                                                                                    <td>
                                                                                                        @{
                                                                                                            var subtotal = c.ProductPrice * c.Quantity;
                                                                                                            total = total + subtotal;
                                                                                                        }
                                                                                                        @subtotal
                                                                                                        $@String.Format("{0:0.00}", @subtotal)

                                                                                                    </td>
                                                                                                    @if (o.Customer.Reviews!=null)
                                                                                                    {
                                                                                                        <td><a class="btn btn-info rounded-0 btn-sm" asp-action="Index" asp-controller="Review" asp-route-Id="@c.ProductId">Update Review</a></td>
                                                                                                        
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                <td><a class="btn btn-info rounded-0 btn-sm" asp-action="Index" asp-controller="Review" asp-route-Id="@c.ProductId">Add Review</a></td>
                                                                                                    }
                                                                                                </tr>

                                                                                                }

                                                                                                <tr>
                                                                                                    <td></td>
                                                                                                    <td></td>
                                                                                                    <td>Total</td>
                                                                                                    <td>
                                                                                                        <p>
                                                                                                            <strong>
                                                                                                               
                                                                                                                $@String.Format("{0:0.00}", total)
                                                                                                            </strong>
                                                                                                        </p>
                                                                                                    </td>
                                                                                                </tr>
                                                                                            </tbody>
                                                                                        </table>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="card mt-4">
                                                                                    <div class="card-body">
                                                                                        <h4>Timeline</h4>
                                                                                        <ul class="timeline">
                                                                                            <li class="active">
                                                                                                <h6>PICKED</h6>
                                                                                                <p class="mb-0 text-muted">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque Lorem ipsum dolor</p>
                                                                                                <o class="text-muted">
                                                                                                    21 March, 2014
                                                                                                </o>
                                                                                            </li>
                                                                                            <li>
                                                                                                <h6>PICKED</h6>
                                                                                                <p class="mb-0 text-muted">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque</p>
                                                                                                <o class="text-muted">
                                                                                                    21 March, 2014
                                                                                                </o>
                                                                                            </li>
                                                                                            <li>
                                                                                                <h6>PICKED</h6>
                                                                                                <p class="mb-0 text-muted">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque</p>
                                                                                                <o class="text-muted">
                                                                                                    21 March, 2014
                                                                                                </o>
                                                                                            </li>
                                                                                            <li>
                                                                                                <h6>PICKED</h6>
                                                                                                <p class="mb-0 text-muted">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque</p>
                                                                                                <o class="text-muted">
                                                                                                    21 March, 2014
                                                                                                </o>
                                                                                            </li>
                                                                                            <li>
                                                                                                <h6>PICKED</h6>
                                                                                                <p class="mb-0 text-muted">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque</p>
                                                                                                <o class="text-muted">
                                                                                                    21 March, 2014
                                                                                                </o>
                                                                                            </li>
                                                                                        </ul>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>


                                                    </div>


                                                </div>
                                            </div>







                                        }
                                    }
                                    else
                                    {
                                        <h4 class="text-info text-center">You hav no order </h4>
                                    }

                                </div>
                                <div class="tab-pane ck-cart-info" id="settings">
                                    <h5 class="mb-3">Change Password</h5>
                                    <div class="card p-2 shadow-lg">
                                        <div class="card-body">
                                            <div class="form-style">
                                                <form action="/action_page.php">
                                                    <div class="row">
                                                        <div class="col-lg-6">
                                                            <div class="form-group ck-form-style">
                                                                <label for="password">Old Password*</label>
                                                                <input type="password" class="rounded-0 form-control" placeholder="Enter password" id="password">
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-6">
                                                            <div class="form-group ck-form-style">
                                                                <label for="password" >New Password *</label>
                                                                <input type="password" class="rounded-0 form-control" placeholder="Enter password"  id="password" >
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="w-25 mx-auto">
                                                        <input type="submit" value="Change" class="btn btn-bg btn-block rounded-0 btn-sm text-white">
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane ck-cart-info" id="coupon">
                                    <p class="text-info text-center">You have no coupon right now</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                @* confirm logout modal *@

                <div class="modal fade" id="confirmLogout" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <p class="modal-title" id="exampleModalLabel">Are you sure ?</p>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>

                            <div class="modal-body d-flex justify-content-center">
                                <a class="btn btn-danger" asp-action="Logout" asp-controller="Customer">Logout</a>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>



